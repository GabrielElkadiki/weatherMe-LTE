<!DOCTYPE html>
<html>
<head>



<link rel="stylesheet" href="style.css">




<script>

var pressureArray = [0,0,0,0,0,0,0,0,0,0,0];
var temperatureArray = [0,0,0,0,0,0,0,0,0,0,0];
var humidityArray = [0,0,0,0,0,0,0,0,0,0,0];
var feelArray = [0,0,0,0,0,0,0,0,0,0,0];
var altitudeArray = [0,0,0,0,0,0,0,0,0,0,0];


</script>

<script>


function drawPressureChart() {
var chartPressure = new CanvasJS.Chart("chartPressureContainer", {
	animationEnabled: true,
	theme: "light2",
	title:{
		text: "Pressure"
	},
	axisY:{
		includeZero: false
	},
	data: [{
		type: "line",
		dataPoints: [
			{ y: pressureArray[0]},
			{ y: pressureArray[1]},
			{ y: pressureArray[2]},
			{ y: pressureArray[3] },
			{ y: pressureArray[4] },
			{ y: pressureArray[5] },
			{ y: pressureArray[6] },
			{ y: pressureArray[7] },
			{ y: pressureArray[8]},
			{ y: pressureArray[9] },
			{ y: pressureArray[10] }
		]
	}]
});
chartPressure.render();
}

function drawTemperatureChart() {
var chartTemperature = new CanvasJS.Chart("chartTemperatureContainer", {
	animationEnabled: true,
	theme: "light2",
	title:{
		text: "Temperature"
	},
	axisY:{
		includeZero: false
	},
	data: [{
		type: "line",
		dataPoints: [
			{ y: temperatureArray[0]},
			{ y: temperatureArray[1]},
			{ y: temperatureArray[2]},
			{ y: temperatureArray[3] },
			{ y: temperatureArray[4] },
			{ y: temperatureArray[5] },
			{ y: temperatureArray[6] },
			{ y: temperatureArray[7] },
			{ y: temperatureArray[8]},
			{ y: temperatureArray[9] },
			{ y: temperatureArray[10] }
		]
	}]
});
chartTemperature.render();
}

function drawHumidityChart() {
var chartHumidity = new CanvasJS.Chart("chartHumidityContainer", {
	animationEnabled: true,
	theme: "light2",
	title:{
		text: "Humidity"
	},
	axisY:{
		includeZero: false
	},
	data: [{
		type: "line",
		dataPoints: [
			{ y: humidityArray[0]},
			{ y: humidityArray[1]},
			{ y: humidityArray[2]},
			{ y: humidityArray[3] },
			{ y: humidityArray[4] },
			{ y: humidityArray[5] },
			{ y: humidityArray[6] },
			{ y: humidityArray[7] },
			{ y: humidityArray[8]},
			{ y: humidityArray[9] },
			{ y: humidityArray[10] }
		]
	}]
});
chartHumidity.render();
}


function drawFeelChart() {
var chartFeel = new CanvasJS.Chart("chartFeelContainer", {
	animationEnabled: true,
	theme: "light2",
	title:{
		text: "What if Feels Like"
	},
	axisY:{
		includeZero: false
	},
	data: [{
		type: "line",
		dataPoints: [
			{ y: feelArray[0]},
			{ y: feelArray[1]},
			{ y: feelArray[2]},
			{ y: feelArray[3] },
			{ y: feelArray[4] },
			{ y: feelArray[5] },
			{ y: feelArray[6] },
			{ y: feelArray[7] },
			{ y: feelArray[8]},
			{ y: feelArray[9] },
			{ y: feelArray[10] }
		]
	}]
});
chartFeel.render();
}

function drawAltitudeChart() {
var chartAltitude = new CanvasJS.Chart("chartAltitudeContainer", {
	animationEnabled: true,
	theme: "light2",
	title:{
		text: "Approximate Altitude"
	},
	axisY:{
		includeZero: false
	},
	data: [{
		type: "line",
		dataPoints: [
			{ y: altitudeArray[0]},
			{ y: altitudeArray[1]},
			{ y: altitudeArray[2]},
			{ y: altitudeArray[3] },
			{ y: altitudeArray[4] },
			{ y: altitudeArray[5] },
			{ y: altitudeArray[6] },
			{ y: altitudeArray[7] },
			{ y: altitudeArray[8]},
			{ y: altitudeArray[9] },
			{ y: altitudeArray[10] }
		]
	}]
});
chartAltitude.render();
}

</script>


<script>
function updatePressureHistory(newValue) {
                pressureArray.shift();
                pressureArray.push(newValue);
                drawPressureChart();
                }

function updateTemperatureHistory(newValue) {
                temperatureArray.shift();
                temperatureArray.push(newValue);
                drawTemperatureChart();
                }

function updateHumidityHistory(newValue) {
                humidityArray.shift();
                humidityArray.push(newValue);
                drawHumidityChart();
                }

function updateFeelHistory(newValue) {
                feelArray.shift();
                feelArray.push(newValue);
                drawFeelChart();
                }

function updateAltitudeHistory(newValue) {
                altitudeArray.shift();
                altitudeArray.push(newValue);
                drawAltitudeChart();
                }

</script>

<script>
window.onload = function() {
drawPressureChart();
drawTemperatureChart();
drawHumidityChart();
drawFeelChart();
drawAltitudeChart();
}
</script>

<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>



<style>

body {
	background-color: powderblue;
}

.grid-container {
  display: grid;
  grid-template-columns: auto auto auto;
  background-color: #2196F3;
  padding: 100px;
  grid-column-gap: 25px;
  grid-row-gap: 25px;
  	border-radius : 30px;
}

.grid-item {
  background-color: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(0, 0, 0, 0.8);
  padding: 20px;
  font-size: 30px;
  text-align: center;
  	border-radius : 30px;
}

img{
	border-radius : 20px 20px 20px 20px;
	}

h1   {
	color: blue;
	font-size: 80px;
	text-align: center;
	font-family: "sans-serif", bahnschrift;
	font-stretch: 40px;
	text-decoration: underline dotted blue;
}

/* Popup box BEGIN */
.hover_bkgr_fricc{
    background:rgba(0,0,0,.4);
    cursor:pointer;
    display:none;
    height:100%;
    position:fixed;
    text-align:center;
    top:0;
    width:100%;
    z-index:10000;
}
.hover_bkgr_fricc .helper{
    display:inline-block;
    height:100%;
    vertical-align:middle;
}
.hover_bkgr_fricc > div {
    background-color: #fff;
    box-shadow: 10px 10px 60px #555;
    display: inline-block;
    height: auto;
    max-width: 551px;
    min-height: 100px;
    vertical-align: middle;
    width: 60%;
    position: relative;
    border-radius: 8px;
    padding: 15px 5%;
}
.popupCloseButton {
    background-color: #fff;
    border: 3px solid #999;
    border-radius: 50px;
    cursor: pointer;
    display: inline-block;
    font-family: arial;
    font-weight: bold;
    position: absolute;
    top: -20px;
    right: -20px;
    font-size: 25px;
    line-height: 30px;
    width: 30px;
    height: 30px;
    text-align: center;
}
.popupCloseButton:hover {
    background-color: #ccc;
}
.trigger_popup_fricc {
    cursor: pointer;
    font-size: 20px;
    margin: 20px;
    display: inline-block;
    font-weight: bold;
}
/* Popup box BEGIN */

</style>
 <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script id=display>
$(document).ready(function(){
  $("btn btn-primary").click(function(){
    $("p").html("pressure");
  });
});
</script>
</head>
<body>
<script>
$(window).load(function popup() {
    $(".trigger_popup_fricc").click(function(){
       $('.hover_bkgr_fricc').show();
    });
    $('.hover_bkgr_fricc').click(function(){
        $('.hover_bkgr_fricc').hide();
    });
    $('.popupCloseButton').click(function(){
        $('.hover_bkgr_fricc').hide();
    });
}
);</script>
<script>
$(window).load(function popup2() {
    $(".trigger_popup_fricc").click(function(){
       $('.hover_bkgr_fricc').show();
    });
    $('.hover_bkgr_fricc').click(function(){
        $('.hover_bkgr_fricc').hide();
    });
    $('.popupCloseButton').click(function(){
        $('.hover_bkgr_fricc').hide();
    });
}
);</script>



<script type="text/javascript">
            function changeText(id, value) {
                document.getElementById(id).innerHTML = value;
                }
</script>

<!--

<script>
$(window).load(function() {
drawTemperatureChart();
alert("hjgjhg");
}
</script>



-->


























<div class="grid-container">
  <div class="grid-item">
  <img src="clouds.jpg" class="card-img-top" alt="clouds" style="width: 400px; height: 200px;">
  <div class="card-body">
    <h5 class="card-title">Pressure</h5>
    <p class="card-text" id="pressure">No Data To Show</p>
    <a href="#" class="btn btn-primary" onclick='parseFloat(fetchData("pressure")); '>Update</a>
	<a class="btn btn-secondary" href="#popupPressure">History</a>
  <div class="popup" id="popupPressure">
    <div class="popup-inner">
      <div id="chartPressureContainer" style="height: 370px; width: 100%;"></div>
      <a class="closepopup" href="#">X</a>
    </div>
  </div>
  </div></div>
  <div class="grid-item">
    <img src="snow.jpg" class="card-img-top" alt="snow" style="width: 350px; height: 200px;">
  <div class="card-body">
    <h5 class="card-title">Temperature</h5>
    <p class="card-text" id="temperature">No Data To Show</p>
    <a href="#" class="btn btn-primary" onclick='parseFloat(fetchData("temperature")); '>Update</a>
    <a class="btn btn-secondary" href="#popupTemperature">History</a>
  <div class="popup" id="popupTemperature">
    <div class="popup-inner">
      <div id="chartTemperatureContainer" style="height: 370px; width: 100%;"></div>
      <a class="closepopup" href="#">X</a>
    </div>
  </div>
  </div></div>
  <div class="grid-item">
    <img src="mist.jpg" class="card-img-top" alt="mist" style="width: 400px; height: 200px;">
  <div class="card-body">
    <h5 class="card-title">Humidity</h5>
    <p class="card-text" id="humidity">No Data To Show</p>
    <a href="#" class="btn btn-primary" onclick='parseFloat(fetchData("humidity")); '>Update</a>
    <a class="btn btn-secondary" href="#popupHumidity">History</a>
  <div class="popup" id="popupHumidity">
    <div class="popup-inner">
      <div id="chartHumidityContainer" style="height: 370px; width: 100%;"></div>
      <a class="closepopup" href="#">X</a>
    </div>
  </div>
  </div></div>
  <div class="grid-item">
    <img src="https://images.pexels.com/photos/1554092/pexels-photo-1554092.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" class="card-img-top" alt="feelsLike" style="width: 400px; height: 200px;">
  <div class="card-body">
    <h5 class="card-title">What it Feels Like</h5>
    <p class="card-text" id="feelslike">No Data To Show</p>
	<a href="#" class="btn btn-primary" onclick='getData("feelslike"); getData("feelslike"); getData("feelslike"); parseFloat(fetchData("feelslike")); '>Update</a>
    <a class="btn btn-secondary" href="#popupFeel">History</a>
  <div class="popup" id="popupFeel">
    <div class="popup-inner">
      <div id="chartFeelContainer" style="height: 370px; width: 100%;"></div>
      <a class="closepopup" href="#">X</a>
    </div>
  </div>
  </div></div>
  <div class="grid-item">
    <!-- <img src="pendulum.jpg" class="card-img-top" alt="pendulum" style="width: 250px; height: 200px;"> -->
  <div class="card-body">
    <h5 class="card-title">DATE</h5>
    <p class="card-text" id="date">January 12, 2020</p>
    <!-- <a href="#" class="btn btn-primary" onclick='changeText("movement", Math.random());'>Update</a> -->
    <!-- <a href="#" class="btn btn-primary" onclick='popup();'>Display Graph</a> -->
  </div></div>
  <div class="grid-item">
    <img src="bulb.jpg" class="card-img-top" alt="bulb" style="width: 350px; height: 200px;">
  <div class="card-body">
    <h5 class="card-title">Altitude</h5>
    <p class="card-text" id="altitude">No Data To Show</p>
	<a href="#" class="btn btn-primary" onclick='parseFloat(fetchData("altitude")); '>Update</a>
    <a class="btn btn-secondary" href="#popupAltitude">History</a>
  <div class="popup" id="popupAltitude">
    <div class="popup-inner">
      <div id="chartAltitudeContainer" style="height: 370px; width: 100%;"></div>
      <a class="closepopup" href="#">X</a>
    </div>
  </div>
  </div> </div>
</div>
</body>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/particle-api-js@8/dist/particle.min.js"></script>
<script>
var particle = new Particle();
var token;

function getData(param){
	console.log(param);
	var fnPr = particle.callFunction({ deviceId: 'tonylte', name: 'Fetch', argument: param, auth: '8c641b0005d711ca63e7a286a5d1ead839e3e3ca' });

	fnPr.then(
	  function(data) {
	    console.log('Function called succesfully:', data);
			console.log("test " + fnPr + parseFloat(data.body.result));
	  }, function(err) {
	    console.log('An error occurred:', err);
	  });
}

function fetchData(param){

getData(param);
setTimeout(function(){
getData(param);
}, 500);
setTimeout(function(){


	particle.getVariable({ deviceId: 'e00fce68f8caf61b899b2934', name: param, auth: '8c641b0005d711ca63e7a286a5d1ead839e3e3ca' }).then(function(data) {
  console.log('Device variable retrieved successfully:', data);
	if(data.body.name == param) {
	var asd = parseFloat(data.body.result);
	console.log(asd);
	console.log(param);
	if(asd != NaN) {
	changeText(param, asd);
	if(param == "pressure"){
		updatePressureHistory(asd);
	}
	else if(param == "temperature"){
		updateTemperatureHistory(asd);
	}
	else if(param == "humidity"){
		updateHumidityHistory(asd);
	}
	else if(param == "feelslike"){
		updateFeelHistory(asd);
	}
	else if(param == "altitude"){
		updateAltitudeHistory(asd);
	}
}
	asd = NaN;
	delete data;
	console.log(asd);
	console.log(data);
}
}, function(err) {
  console.log('An error occurred while getting attrs:', err);
});

}, 1500);

}



</script>
</html>
